<!DOCTYPE html>
<html lang="en">
{% load static %}
{% load staticfiles %}
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="format-detection" content="telephone=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="author" content="">
    <meta name="keywords" content="">
    <meta name="description" content="">
    <title>Fratishop -home for all furniture!</title>

    <link href="https://fonts.googleapis.com/css?family=Work+Sans:300,400,500,600,700&amp;amp;subset=latin-ext" rel="stylesheet">
    <link rel="stylesheet" href="{% static 'main/plugins/font-awesome/css/font-awesome.min.css' %}">
    <link rel="stylesheet" href="{% static 'main/fonts/Linearicons/Linearicons/Font/demo-files/demo.css' %}">
    <link rel="stylesheet" href="{% static 'main/plugins/bootstrap/css/bootstrap.min.css' %}">
    <link rel="stylesheet" href="{% static 'main/plugins/owl-carousel/assets/owl.carousel.min.css' %}">
    <link rel="stylesheet" href="{% static 'main/plugins/owl-carousel/assets/owl.theme.default.min.css' %}">
    <link rel="stylesheet" href="{% static 'main/plugins/slick/slick/slick.css' %}">
    <link rel="stylesheet" href="{% static 'main/plugins/nouislider/nouislider.min.css' %}">
    <link rel="stylesheet" href="{% static 'main/plugins/lightGallery-master/dist/css/lightgallery.min.css' %}">
    <link rel="stylesheet" href="{% static 'main/plugins/jquery-bar-rating/dist/themes/fontawesome-stars.css' %}">
    <link rel="stylesheet" href="{% static 'main/plugins/select2/dist/css/select2.min.css' %}">
    <link rel="stylesheet" href="{% static 'main/css/style.css' %}">
    <link rel="stylesheet" href="{% static 'main/css/market-place-1.css' %}"> 
    <link rel="stylesheet" type="text/css" href="{% static 'main/css/deque-patterns.min.css' %}">

</head>
<body>
<style>
	span{cursor:pointer; }
		.minus, .plus{
			width:20px;
			height:20px;
			background:#f2f2f2;
			border-radius:4px;
			padding:8px 5px 8px 5px;
			border:1px solid #ddd;
      display: inline-block;
      vertical-align: middle;
      text-align: center;
		}
		input{
			height:34px;
      width: 100px;
      text-align: center;
      font-size: 26px;
			border:1px solid #ddd;
			border-radius:4px;
      display: inline-block;
      vertical-align: middle;
			}
			
</style>

<style>
.deque-slider-multirange label {
  display: inline-block;
  margin: 10px;
  padding: 10px;
  font-size: 10px;
  font-family: 'Open Sans', sans-serif;
}
.deque-slider-multirange label input {
  margin: 0 0 0 10px;
  padding: 5px;
}
.deque-slider-multirange label input:focus {
  outline: 1px dashed #000000;
}
.deque-slider-multirange .slider {
  position: relative;
  height: 4px;
  background: rgba(0, 0, 0, 0.4);
  margin-top: 12px;
}
.deque-slider-multirange .slider button {
  height: 24px;
  width: 8px;
  background: #0078d7;
  padding: 0;
  border-radius: 4px;
  position: absolute;
  top: -12px;
  outline: none;
  max-width: auto;
  min-width: auto;
  border: 1px solid transparent;
}
.deque-slider-multirange .slider button:focus,
.deque-slider-multirange .slider button:active {
  outline: 1px dashed #000000;
}
</style>


 <header class="header header--1" data-sticky="true">
        <div class="header__top">
            <div class="ps-container">
                <div class="header__left">
                    <div class="menu--product-categories">
                        <div class="menu__toggle"><i class="icon-menu"></i><span> Shop by Category</span></div>
                        <div class="menu__content">
                            <ul class="menu--dropdown">
                                <li class="current-menu-item "><a href="{% url 'category' 'BEDROOM' %}"><i class="icon-star"></i>BEDROOM</a></li>
                                <li class="current-menu-item "><a href="{% url 'category' 'KITCHEN & DINNING' %}"><i class="icon-star"></i>KITCHEN & DINNING</a></li>
                                <li class="current-menu-item "><a href="{% url 'category' 'LIVING ROOM' %}"><i class="icon-star"></i>LIVING ROOM</a></li>
                                <li class="current-menu-item "><a href="{% url 'category' 'OFFICE' %}"><i class="icon-star"></i>OFFICE</a></li>
                                <li class="current-menu-item "><a href="{% url 'category' 'KIDDIES' %}"><i class="icon-star"></i>KIDDIES</a></li>
                                <li class="current-menu-item "><a href="{% url 'category' 'ACESSORIES' %}"><i class="icon-star"></i>ACESSORIES</a></li>
                            </ul>
                        </div>
                    </div><a class="ps-logo" href="#"><img src="img/logo_light.png" alt=""></a>
                </div>
                <div class="header__center">
                    <form class="ps-form--quick-search" method="post">
                    	{% csrf_token %}
                        <div class="form-group--icon"><i class="icon-chevron-down"></i>
                            <select name="categories" class="form-control">
                                <option value="ALL" selected="selected">ALL</option>
                                <option class="level-0" value="BEDROOM">BEDROOM</option>
                                <option class="level-0" value="KITCHEN & DINNING">KITCHEN & DINNING</option>
                                <option class="level-0" value="KIDDIES">KIDDIES</option>
                                <option class="level-0" value="LIVING ROOM">LIVING ROOM</option>
                                <option class="level-1" value="OFFICE">OFFICE</option>
                                <option class="level-1" value="ACCESSORIES">ACCESSORIES</option>
                            </select>
                        </div>
                        <input name="query" class="form-control" type="text" placeholder="I'm shopping for...">
                        <button>Search</button>
                    </form>
                </div>
                <div class="header__right">
                    <div class="header__actions">
                        <div class="ps-cart--mini"><a class="header__extra" href="#"><i class="icon-bag2"></i><span><i>{{ product_quantitys.count }}</i></span></a>
                            <div class="ps-cart__content">
                                <div class="ps-cart__items">
                                	{% if product_quantitys %}
                                		{% for item in product_quantitys %}
				                            <div class="ps-product--cart-mobile">
				                                <div class="ps-product__thumbnail"><a href="{% url 'product_detail' item.product.slug %}"><img src="{{ item.product.image_1.url }}" alt=""></a></div>
				                                <div class="ps-product__content"><a class="ps-product__remove" href="{% url 'remove_product_cart' item.product.slug %}"><i class="icon-cross"></i></a><a href="{% url 'product_detail' item.product.slug %}">{{ item.product.name }}</a><br />
				                                    <span><strong>Quantity: </strong>{{ item.quantity }}</span><br />
				                                    <pspan><strong>Price: </strong>{{ item.product.price }}</span><br />
				                                    <span><strong>Shipping Charge: </strong>{{ item.total_shipping_charge }}</span><br /><br />
				                                </div>
				                            </div>
				                          {% endfor %}
				                         {% else %}
				                         	<div class="ps-product--cart-mobile">
				                         		<p>No product in your cart, yet!</p>
				                         	</div>
				                         {% endif %}
                                </div>
                                <div class="ps-cart__footer">
                                    <h3>Total:<strong>{{ total_price }}</strong></h3>
                                    <figure><a class="ps-btn" href="{% url 'cart' request.user.id %}">View Cart</a><a class="ps-btn" href="{% url 'checkout' %}">Checkout</a></figure>
                                </div>
                            </div>
                        </div>
                        <div class="ps-block--user-header">
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <nav class="navigation">
            <div class="ps-container">
                <div class="navigation__left">
                    <div class="menu--product-categories">
                        <div class="menu__toggle"><i class="icon-menu"></i><span> Shop by Category</span></div>
                        <div class="menu__content">
                            <ul class="menu--dropdown"> 
                                <li class="current-menu-item "><a href="{% url 'category' 'BEDROOM' %}"><i class="icon-star"></i>BEDROOM</a></li>
                                <li class="current-menu-item "><a href="{% url 'category' 'KITCHEN & DINNING' %}"><i class="icon-star"></i>KITCHEN & DINNING</a></li>
                                <li class="current-menu-item "><a href="{% url 'category' 'LIVING ROOM' %}"><i class="icon-star"></i>LIVING ROOM</a></li>
                                <li class="current-menu-item "><a href="{% url 'category' 'OFFICE' %}"><i class="icon-star"></i>OFFICE</a></li>
                                <li class="current-menu-item "><a href="{% url 'category' 'KIDDIES' %}"><i class="icon-star"></i>KIDDIES</a></li>
                                <li class="current-menu-item "><a href="{% url 'category' 'ACESSORIES' %}"><i class="icon-star"></i>ACESSORIES</a></li>
                            </ul>
                        </div>
                    </div>
                </div>
                <div class="navigation__right">
                    <ul class="menu">
                        <li class="menu-item-has-children"><a href="{% url 'index' %}">Home</a><span class="sub-toggle"></span></li>
                        <li class="menu-item-has-children"><a href="{% url 'shop' %}">Shop</a><span class="sub-toggle"></span></li>
                        <li class="menu-item-has-children"><a href="{% url 'cart' request.user.id %}">My Cart</a><span class="sub-toggle"></span></li>
                    </ul>
                    <ul class="navigation__extra">
                        <li><a href="{% url 'all_products' %}">Trending</a></li>
                        <li><a href="{% url 'all_products' %}">Latest</a></li>
                        <li><a href="{% url 'all_products' %}">All</a></li>
                    </ul>
                </div>
            </div>
        </nav>
    </header>
    
    
    
    <header class="header header--mobile" data-sticky="true">
        <div class="header__top">
            <div class="header__left">
                <p>Welcome to Fratishop Online Shopping Store !</p>
            </div>
        </div>
        <div class="navigation--mobile">
            <div class="navigation__left"><a class="ps-logo" href="{% url 'index' %}"><img src="img/logo_light.png" alt=""></a></div>
            <div class="navigation__right">
                <div class="header__actions">
                    <div class="ps-cart--mini"><a class="header__extra" href="#"><i class="icon-bag2"></i><span><i>{{ product_quantitys.count }}</i></span></a>
                        <div class="ps-cart__content">
                            <div class="ps-cart__items">
                                {% if product_quantitys %}
                                		{% for item in product_quantitys %}
				                            <div class="ps-product--cart-mobile">
				                                <div class="ps-product__thumbnail"><a href="#"><img src="{{ item.product.image_1.url }}" alt=""></a></div>
				                                <div class="ps-product__content"><a class="ps-product__remove" href="{% url 'remove_product_cart' item.product.slug %}"><i class="icon-cross"></i></a>
				                                <a href="{% url 'product_detail' item.product.slug %}">{{ item.product.name }}</a><br />
				                                    <span><strong>Quantity: </strong>{{ item.quantity }}</span><br />
				                                    <pspan><strong>Price: </strong>{{ item.product.price }}</span><br />
				                                    <span><strong>Shipping Charge: </strong>{{ item.total_shipping_charge }}</span><br /><br />
				                                </div>
				                            </div>
				                          {% endfor %}
				                         {% else %}
				                         	<div class="ps-product--cart-mobile">
				                         		<p>No product in your cart, yet!</p>
				                         	</div>
				                         {% endif %}
                                </div>
                                <div class="ps-cart__footer">
                                    <h3>Total:<strong>{{ total_price }}</strong></h3>
                                    <figure><a class="ps-btn" href="{% url 'cart' request.user.id %}">View Cart</a><a class="ps-btn" href="{% url 'checkout' %}">Checkout</a></figure>
                                </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="ps-search--mobile">
            <form class="ps-form--search-mobile" method="post">
            	{% csrf_token %}
                <div class="form-group--nest">
                    <input name="query" class="form-control" type="text" placeholder="Search something...">
                    <button><i class="icon-magnifier"></i></button>
                </div>
            </form>
        </div>
    </header>
    
    
    
    
        <div class="ps-panel--sidebar" id="cart-mobile">
        <div class="ps-panel__header">
            <h3>Shopping Cart</h3>
        </div>
        <div class="navigation__content">
            <div class="ps-cart--mobile">
                <div class="ps-cart__content">
                	{% if product_quantitys %}
                           {% for item in product_quantitys %}
                    <div class="ps-product--cart-mobile">
                        <div class="ps-product__thumbnail"><a href="#"><img src="{{ item.product.image_1.url }}" alt=""></a></div>
                        <div class="ps-product__content"><a class="ps-product__remove" href="{% url 'remove_product_cart' item.product.slug %}"><i class="icon-cross"></i></a>
                        <a href="{% url 'product_detail' item.product.slug %}">{{ item.product.name }}</a><br />
				        <span><strong>Quantity: </strong>{{ item.quantity }}</span><br />
				        <pspan><strong>Price: </strong>{{ item.product.price }}</span><br />
				      	<span><strong>Shipping Charge: </strong>{{ item.total_shipping_charge }}</span><br /><br />
                        </div>
                    </div>
                   {% endfor %}
                   {% else %}
                   		<div class="ps-product--cart-mobile">
                   			<p>Sorry, Nothing Yet!</p>
                   		</div>
                   	{% endif %}
                </div>
                <div class="ps-cart__footer">
                    <h3>Total:<strong>{{ total_price }}</strong></h3>
                    <figure><a class="ps-btn" href="{% url 'cart' request.user.id %}">View Cart</a><a class="ps-btn" href="{% url 'checkout' %}">Checkout</a></figure>
                </div>
            </div>
        </div>
    </div>
    <div class="ps-panel--sidebar" id="navigation-mobile">
        <div class="ps-panel__header">
            <h3>Categories</h3>
        </div>
        <div class="ps-panel__content">
            <ul class="menu--mobile">
                <li class="current-menu-item "><a href="{% url 'category' 'BEDROOM' %}"><i class="icon-star"></i>BEDROOM</a></li>
                                <li class="current-menu-item "><a href="{% url 'category' 'KITCHEN & DINNING' %}"><i class="icon-star"></i>KITCHEN & DINNING</a></li>
                                <li class="current-menu-item "><a href="{% url 'category' 'LIVING ROOM' %}"><i class="icon-star"></i>LIVING ROOM</a></li>
                                <li class="current-menu-item "><a href="{% url 'category' 'OFFICE' %}"><i class="icon-star"></i>OFFICE</a></li>
                                <li class="current-menu-item "><a href="{% url 'category' 'KIDDIES' %}"><i class="icon-star"></i>KIDDIES</a></li>
                                <li class="current-menu-item "><a href="{% url 'category' 'ACESSORIES' %}"><i class="icon-star"></i>ACESSORIES</a></li>
                  
            </ul>
        </div>
    </div>
    <div class="navigation--list">
        <div class="navigation__content">
        <a class="navigation__item ps-toggle--sidebar" href="#menu-mobile"><i class="icon-menu"></i><span> Menu</span></a><a class="navigation__item ps-toggle--sidebar" href="#navigation-mobile"><i class="icon-list4"></i><span> Categories</span>
        </a>
        <a class="navigation__item ps-toggle--sidebar" href="#cart-mobile"><i class="icon-bag2"></i><span> Cart</span></a></div>
    </div>
    <div class="ps-panel--sidebar" id="search-sidebar">
        <div class="ps-panel__header">
            <form class="ps-form--search-mobile" method="post">
            	{% csrf_token %}
                <div class="form-group--nest">
                    <input name="query" class="form-control" type="text" placeholder="Search something...">
                    <button><i class="icon-magnifier"></i></button>
                </div>
            </form>
        </div>
        <div class="navigation__content"></div>
    </div>
    <div class="ps-panel--sidebar" id="menu-mobile">
        <div class="ps-panel__header">
            <h3>Menu</h3>
        </div>
        <div class="ps-panel__content">
            <ul class="menu--mobile">
                <li class="menu-item-has-children"><a href="{% url 'index' %}">Home</a><span class="sub-toggle"></span>
                </li>
                <li class="menu-item-has-children"><a href="{% url 'shop' %}">Shop</a><span class="sub-toggle"></span>
                </li>
                <li class="menu-item-has-children"><a href="{% url 'cart' request.user.id %}">My Cart</a><span class="sub-toggle"></span>
                </li>
                            </ul>
                        </div>
                    </div>
                </li>
            </ul>
        </div>
    </div>
    
  			{% block content %}
			
        	{% endblock content %}




    <footer class="ps-footer">
        <div class="ps-container">
            <div class="ps-footer__widgets">
                <aside class="widget widget_footer widget_contact-us">
                    <h4 class="widget-title">Contact us</h4>
                    <div class="widget_content">
                        <p>Call us 24/7</p>
                        <h3>+234 123 456 78</h3>
                        <p>Idu Karmo Abuja<br><a href="mailto:info@fratishop.com">info@fratishop.com</a></p>
                        <ul class="ps-list--social">
                            <li><a class="facebook" href="#"><i class="fa fa-facebook"></i></a></li>
                            <li><a class="twitter" href="#"><i class="fa fa-twitter"></i></a></li>
                            <li><a class="google-plus" href="#"><i class="fa fa-google-plus"></i></a></li>
                            <li><a class="instagram" href="#"><i class="fa fa-instagram"></i></a></li>
                        </ul>
                    </div>
                </aside>
                <aside class="widget widget_footer">
                    <h4 class="widget-title">Quick links</h4>
                    <ul class="ps-list--link">
                        <li><a href="#">Policy</a></li>
                        <li><a href="#">Term & Condition</a></li>
                        <li><a href="#">Shipping</a></li>
                        <li><a href="#">Return</a></li>
                        <li><a href="#">FAQs</a></li>
                    </ul>
                </aside>
                <aside class="widget widget_footer">
                    <h4 class="widget-title">Company</h4>
                    <ul class="ps-list--link">
                        <li><a href="#">About Us</a></li>
                        <li><a href="#">Affilate</a></li>
                        <li><a href="#">Career</a></li>
                        <li><a href="#">Contact</a></li>
                    </ul>
                </aside>
                <aside class="widget widget_footer">
                    <h4 class="widget-title">Menu</h4>
                    <ul class="ps-list--link">
                        <li><a href="{% url 'index' %}">Home</a></li>
                        <li><a href="{% url 'shop' %}">Shop</a></li>
                        <li><a href="{% url 'cart' request.user.id %}">My Cart</a></li>
                        <li><a href="{% url 'checkout' %}">Checkout</a></li>
                    </ul>
                </aside>
            </div>
            <div class="ps-footer__links">
                <p><strong>BEDROOM:</strong>{% if bedrooms %}
                		{% for item in bedrooms %}
                			<a href="{% url 'product_detail' item.slug %}">{{ item.name  }}</a>
                		{% endfor %}
                		
                		{% else %}
 
                		{% endif %}
                </p>
                <p><strong>KITCHEN & DINNING:</strong>{% if kitchens %}
                		{% for item in kitchens %}
                			<a href="{% url 'product_detail' item.slug %}">{{ item.name  }}</a>
                		{% endfor %}
                		
                		{% else %}
 
                		{% endif %}
                </p>
                <p><strong>LIVING ROOM:</strong>{% if living_rooms %}
                		{% for item in living_rooms %}
                			<a href="{% url 'product_detail' item.slug %}">{{ item.name  }}</a>
                		{% endfor %}
                		
                		{% else %}
 
                		{% endif %}
                </p>
                <p><strong>OFFICE:</strong>{% if offices %}
                		{% for item in offices %}
                			<a href="{% url 'product_detail' item.slug %}">{{ item.name  }}</a>
                		{% endfor %}
                		
                		{% else %}
 
                		{% endif %}
                </p>
                <p><strong>KIDDIES:</strong>{% if kiddies %}
                		{% for item in kiddies %}
                			<a href="{% url 'product_detail' item.slug %}">{{ item.name  }}</a>
                		{% endfor %}
                		
                		{% else %}
 
                		{% endif %}
                </p>
                <p><strong>ACESSORIES:</strong>
                	{% if acessories %}
                		{% for item in acessories %}
                			<a href="{% url 'product_detail' item.slug %}">{{ item.name  }}</a>
                		{% endfor %}
                		
                		{% else %}
 
                		{% endif %}
                </p>
            </div>
            <div class="ps-footer__copyright">
                <p>© 2020 Fratishop. All Rights Reserved</p>
                <p><span>Home for all kinds of Furniture:</span><a href="#"><img src="img/payment-method/1.jpg" alt=""></a><a href="#"><img src="img/payment-method/2.jpg" alt=""></a><a href="#"><img src="img/payment-method/3.jpg" alt=""></a><a href="#"><img src="img/payment-method/4.jpg" alt=""></a><a href="#"><img src="img/payment-method/5.jpg" alt=""></a></p>
            </div>
        </div>
    </footer>

    <div id="back2top"><i class="pe-7s-angle-up"></i></div>
    <div class="ps-site-overlay"></div>
    <div id="loader-wrapper">
        <div class="loader-section section-left"></div>
        <div class="loader-section section-right"></div>
    </div>
    <div class="ps-search" id="site-search"><a class="ps-btn--close" href="#"></a>
        <div class="ps-search__content">
            <form class="ps-form--primary-search" action="do_action" method="post">
                <input class="form-control" type="text" placeholder="Search for...">
                <button><i class="aroma-magnifying-glass"></i></button>
            </form>
        </div>
    </div>
    	{% for item in all_products %}
    	<div id="product-quickview">
    <div class="modal fade" id="{{ item.slug }}" tabindex="-1" role="dialog" aria-labelledby="product-quickview" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content"><span class="modal-close" data-dismiss="modal"><i class="icon-cross2"></i></span>
                <article class="ps-product--detail ps-product--fullwidth ps-product--quickview">
                    <div class="ps-product__header">
                        <div class="ps-product__thumbnail" data-vertical="false">
                            <div class="ps-product__images" data-arrow="true">
                                <div class="item"><img src="{{ item.image_1.url }}" alt=""></div>
                                <div class="item"><img src="{{ item.image_2.url }}" alt=""></div>
                                <div class="item"><img src="{{ item.image_3.url }}" alt=""></div>
                                <div class="item"><img src="{{ item.image_4.url }}" alt=""></div>
                            </div>
                        </div>
                        <div class="ps-product__info">
                            <h1>{{ item.name }}</h1>
                            <div class="ps-product__meta">
                                <p>Category: <a href="#">{{ item.category }}</a></p>
                                <div class="ps-product__rating">
                                    <select class="ps-rating" data-read-only="true">
                                        <option value="1">1</option>
                                        <option value="1">2</option>
                                        <option value="1">3</option>
                                        <option value="1">4</option>
                                        <option value="2">5</option>
                                    </select><span>(1 review)</span>
                                </div>
                            </div>
                            <h4 class="ps-product__price">Price: {{ item.price }}</h4>
                            <div class="ps-product__desc">
                                <p><a href="#"><strong>Details</strong></a></p>
                                <ul class="ps-list--dot">
                                    <li>{{ item.description }}</li>
                                    <li>{{ item.specification }}</li>
                                </ul>
                            </div>
                            <div class="ps-product__shopping"><a class="ps-btn ps-btn--black" href="{% url 'add_product_to_cart' item.slug %}">Add to cart</a><a class="ps-btn" href="{% url 'cart' request.user.id %}">Buy Now</a>
                                <div class="ps-product__actions"><a href="#"><i class="icon-heart"></i></a><a href="#"><i class="icon-chart-bars"></i></a></div>
                            </div>
                        </div>
                    </div>
                </article>
                	
                
                
            </div>
        </div>
    </div>
     </div>
    {% endfor %}

    <script src="{% static 'main/plugins/jquery.min.js' %}"></script>
    <script src="{% static 'main/plugins/nouislider/nouislider.min.js' %}"></script>
    <script src="{% static 'main/plugins/popper.min.js' %}"></script>
    <script src="{% static 'main/plugins/owl-carousel/owl.carousel.min.js' %}"></script>
    <script src="{% static 'main/plugins/bootstrap/js/bootstrap.min.js' %}"></script>
    <script src="{% static 'main/plugins/imagesloaded.pkgd.min.js' %}"></script>
    <script src="{% static 'main/plugins/masonry.pkgd.min.js' %}"></script>
    <script src="{% static 'main/plugins/isotope.pkgd.min.js' %}"></script>
    <script src="{% static 'main/plugins/jquery.matchHeight-min.js' %}"></script>
    <script src="{% static 'main/plugins/slick/slick/slick.min.js' %}"></script>
    <script src="{% static 'main/plugins/jquery-bar-rating/dist/jquery.barrating.min.js' %}"></script>
    <script src="{% static 'main/plugins/slick-animation.min.js' %}"></script>
    <script src="{% static 'main/plugins/lightGallery-master/dist/js/lightgallery-all.min.js' %}"></script>
    <script src="{% static 'main/plugins/sticky-sidebar/dist/sticky-sidebar.min.js' %}"></script>
    <script src="{% static 'main/plugins/select2/dist/js/select2.full.min.js' %}"></script>
    <script src="{% static 'main/plugins/gmap3.min.js' %}"></script>
    <!-- custom scripts-->
    <script src="{% static 'main/js/main.js' %}"></script>
    <script type="text/javascript" src="{% static 'main/plugins/deque-patterns.min.js' %}"></script>
    
       <script>
   	$(document).ready(function() {
			$('.minus').click(function () {
				var $input = $(this).parent().find('input');
				var count = parseInt($input.val()) - 1;
				count = count < 1 ? 1 : count;
				$input.val(count);
				$input.change();
				return false;
			});
			$('.plus').click(function () {
				var $input = $(this).parent().find('input');
				$input.val(parseInt($input.val()) + 1);
				$input.change();
				return false;
			});
		});
   
   </script>
   
   <script>
   var formatter = new Intl.NumberFormat('en-US', {
  style: 'currency',
  currency: 'USD',
  minimumFractionDigits: 0,
});

function formatMoney(v) {
  return formatter.format(v);
}

function deformatMoney(v) {
  return parseFloat(v.replace(/[^0-9-.]/g, ''));
}

function removeDollarSign(v) {
  return v.replace(/(\.|\,|\$)+/g, '');
}

function showMessage(message, classes) {
  var alert = deque.createAlert(message, classes);
  alertRegion.appendChild(alert);
  createAriaLiveContainer(message);
}

function createAriaLiveContainer(message) {
  var liveregion_assertive = document.querySelector('#liveregion_assertive');
  if(!liveregion_assertive) {
    var parentDequeSliderContainer = document.querySelector('.deque-slider-multirange');
    var liveRegionElement = document.createElement('div');
    liveRegionElement.id = 'liveregion_assertive';
    liveRegionElement.setAttribute('role', 'alert');
    liveRegionElement.setAttribute('aria-live', 'assertive');
    liveRegionElement.setAttribute('aria-atomic', 'true');
    liveRegionElement.style.height = '0px';
    liveRegionElement.style.overflow = 'hidden';
    parentDequeSliderContainer.appendChild(liveRegionElement);
  }
  document.getElementById('liveregion_assertive').innerText = message;
}

var multirangeSlider = document.querySelector(".deque-slider-multirange");

var startThumb = multirangeSlider.querySelector('.minPrice');
var stopThumb = multirangeSlider.querySelector('.maxPrice');

var thumbs = [{
  label: startThumb.getAttribute('aria-label'),
  labelFromValue: formatMoney,
  stepSize: startThumb.getAttribute('data-increment'),
  initialValue: startThumb.getAttribute('aria-valuenow'),
  classes: [],
  textParser: deformatMoney
},{
  label: stopThumb.getAttribute('aria-label'),
  labelFromValue: formatMoney,
  stepSize: stopThumb.getAttribute('data-increment'),
  initialValue: stopThumb.getAttribute('aria-valuenow'),
  classes: [],
  textParser: deformatMoney
}]

var minValue = startThumb.getAttribute('aria-valuemin');
minValue = parseInt(minValue);
var maxValue = startThumb.getAttribute('aria-valuemax');
maxValue = parseInt(maxValue);
var orientation = startThumb.getAttribute('aria-orientation');

deque.createMultirange(multirangeSlider, thumbs, minValue, maxValue, orientation);

var alertRegion = multirangeSlider.querySelector('#alertRegion');

var startThumb = multirangeSlider.querySelector('.minPrice');
var stopThumb = multirangeSlider.querySelector('.maxPrice');
var multirangeLabel = multirangeSlider.querySelector('#label');

var startInput = multirangeSlider.querySelector('input:first-child');
var stopInput = multirangeSlider.querySelector('label:nth-of-type(2) input');


startInput.addEventListener('blur', validateInputs);
startInput.addEventListener('keydown', onEnter);
stopInput.addEventListener('blur', validateInputs);
stopInput.addEventListener('keydown', onEnter);

startInput.addEventListener('keyup', triggerEmptyMessage);
stopInput.addEventListener('keyup', triggerEmptyMessage);

function triggerEmptyMessage(e) {
  if(e.currentTarget.value.length != 0) {
    createAriaLiveContainer('');
  }
}

startThumb.addEventListener('click', function(e) {
  e.currentTarget.focus();
});

stopThumb.addEventListener('click', function(e) {
  e.currentTarget.focus();
});

function onEnter(e) {
  if(e.which === 13) {
    validateInputs(e);
  }
}

function validateInputs(e) {
  alertRegion.innerHTML = '';
  if(!e.currentTarget.value) {
    e.currentTarget.focus();
    e.target.classList.add('invalid');
    showMessage('Value can not be empty', ['error']);
    e.target.setAttribute('aria-invalid', true);
    return false;
  } else {
    createAriaLiveContainer('');
    e.target.classList.remove('invalid');
    e.target.removeAttribute('aria-invalid');
  }

  var newVal = deformatMoney(e.target.value);
  var maxVal = startThumb.getAttribute('aria-valuemax');
  var minVal = startThumb.getAttribute('aria-valuemin');
  var maxValNow = stopThumb.getAttribute('aria-valuenow');
  var minValNow = startThumb.getAttribute('aria-valuenow');



  if (newVal > maxVal || newVal < minVal) {
    e.target.classList.add('invalid');
    showMessage('Value must be between $150,000 and $450,000', ['error']);
    e.target.setAttribute('aria-invalid', true);
    e.currentTarget.focus();
  } else if (isNaN(removeDollarSign(e.target.value))) {
    e.target.classList.add('invalid');
    showMessage('Please enter a valid dollar amount', ['error']);
    e.target.setAttribute('aria-invalid', true);
    e.currentTarget.focus();
  } else if (minValNow > maxValNow){
    e.target.classList.add('invalid');
    showMessage('The minimum value must be less than the maximum value', ['error']);
    e.target.setAttribute('aria-invalid', true);
    e.currentTarget.focus();
  } else {
    e.target.classList.remove('invalid');
    e.target.removeAttribute('aria-invalid');
  }
}

multirangeSlider.addEventListener('change', setMultirangeSliderLabel);
multirangeSlider.addEventListener('change', validateSlider);

function validateSlider(e){
  alertRegion.innerHTML = '';
  var maxValNow = stopThumb.getAttribute('aria-valuenow');
  var minValNow = startThumb.getAttribute('aria-valuenow');
  if (minValNow > maxValNow){
    e.target.classList.add('invalid');
    showMessage('The minimum value must be less than the maximum value', ['error']);
    e.target.setAttribute('aria-invalid', true);
  } else {
    createAriaLiveContainer('');
    e.target.classList.remove('invalid');
    e.target.removeAttribute('aria-invalid');
  }
  e.target.focus();
}

function setMultirangeSliderLabel() {
  var label = 'Between ' + startThumb.getAttribute('aria-valuetext');
  label += ' and ' + stopThumb.getAttribute('aria-valuetext');

  multirangeLabel.innerText = label;
}

setMultirangeSliderLabel();
</script>

</body>

</html>
